<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <!-- Same head section as flood.html -->
         <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thunderstorm Prediction | Disaster Alert System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/darkmode.css') }}">
        <!-- Animate.css CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <script src="https://cdn.tailwindcss.com"></script>

  <!-- ✅ Dark mode support -->
  <script>
    tailwind.config = {
      darkMode: 'class', // enables dark mode via class="dark"
      theme: {
        extend: {
          colors: {
            lightgreen: '#d0f0c0' // custom light green color
          }
        }
      }
    }
  </script>
  <style>
@keyframes pulseSlow {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(34,197,94, 0.7);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 10px 5px rgba(34,197,94, 0.3);
  }
}

.animate-pulse-slow {
  animation: pulseSlow 3s ease-in-out infinite;
}
</style>

</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">
<!-- Header/Navbar -->
    <header class="sticky top-0 z-50 bg-green-700 dark:bg-green-800 text-white shadow-md">
        <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-shield-alt text-2xl"></i>
                <span class="text-xl font-bold">DisasterAlert</span>
            </div>

            <div class="hidden md:flex space-x-6">
            <a href="{{ url_for('index') }}" class="hover:text-gray-200 hover:underline active">Home</a>
            <a href="{{ url_for('flood') }}" class="hover:text-gray-200 hover:underline">Flood</a>
            <a href="{{ url_for('fire') }}" class="hover:text-gray-200 hover:underline">Forest Fire</a>
            <a href="{{ url_for('earthquake') }}" class="hover:text-gray-200 hover:underline">Earthquake</a>
            <a href="{{ url_for('cyclone') }}" class="hover:text-gray-200 hover:underline">Cyclone</a>
            <a href="{{ url_for('thunderstorm') }}" class="hover:text-gray-200 hover:underline">Thunderstorm</a>
            <a href="{{ url_for('heatwave') }}" class="hover:text-gray-200 hover:underline">Heatwave</a>
            <a href="{{ url_for('updates') }}" class="hover:text-gray-200 hover:underline">Updates</a>
            <a href="{{ url_for('alerts') }}" class="hover:text-gray-200 hover:underline">Alerts</a>
            <a href="{{ url_for('analysis') }}" class="hover:text-gray-200 hover:underline">Analysis</a>
            <a href="{{ url_for('login') }}" class="relative px-4 py-0 rounded-md text-white bg-green-500 hover:bg-green-700 transition-all duration-300 ease-in-out shadow-md hover:shadow-lg animate-pulse-slow">Login</a>
            </div>

            <div class="flex items-center space-x-4">
                <button id="themeToggle" class="p-2 rounded-full bg-green-600 hover:bg-green-800 transition">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="mobileMenuButton" class="md:hidden p-2 rounded-full bg-green-600 hover:bg-green-800 transition">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-green-800 text-white py-4 px-6">
            <div class="flex flex-col space-y-3">
               <a href="{{ url_for('index') }}" class="hover:text-gray-200 hover:underline">Home</a>
                <a href="{{ url_for('flood') }}" class="hover:text-gray-200 hover:underline">Flood</a>
                <a href="{{ url_for('fire') }}" class="hover:text-gray-200 hover:underline">Forest Fire</a>
                <a href="{{ url_for('earthquake') }}" class="hover:text-gray-200 hover:underline">Earthquake</a>
                <a href="{{ url_for('cyclone') }}" class="hover:text-gray-200 hover:underline">Cyclone</a>
                <a href="{{ url_for('thunderstorm') }}" class="hover:text-gray-200 hover:underline">Thunderstorm</a>
                <a href="{{ url_for('heatwave') }}" class="hover:text-gray-200 hover:underline">Heatwave</a>
                <a href="{{ url_for('updates') }}" class="hover:text-gray-200 hover:underline">Updates</a>
                <a href="{{ url_for('alerts') }}" class="hover:text-gray-200 hover:underline">Alerts</a>
                <a href="{{ url_for('analysis') }}" class="hover:text-gray-200 hover:underline">Analysis</a>
                <a href="{{ url_for('login') }}" class="relative px-4 py-1 rounded-md text-white bg-green-600 hover:bg-green-500 transition-all duration-300 ease-in-out shadow-md hover:shadow-lg animate-pulse-slow">Login</a>
                </button>
            </div>
        </div>
    </header>

<body class="bg-white dark:bg-black text-gray-800 dark:text-gray-200 transition-colors duration-300">
    <!-- Same header/navbar as flood.html -->

        <!-- Hero Section with Video Background -->
<section class="relative h-screen flex items-center justify-center overflow-hidden">
    <style>
  html {
    scroll-behavior: smooth;
  }
</style>

  <!-- Background Video -->
  <video autoplay muted loop playsinline class="absolute inset-0 w-full h-full object-cover z-[-1] opacity-80 dark:opacity-100">
    <source src="{{ url_for('static', filename='assets/videos/thunderstorm_features2.mp4') }}" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <!-- Optional Overlay (for readability) -->
  <!-- <div class="absolute inset-0 bg-white/20 dark:bg-black/30 z-0"></div> -->

  <!-- Hero Content -->
  <div class="relative z-10 text-center px-4">
<h1 class="text-4xl md:text-5xl font-bold mb-4">Instant Thunderstorm Forecasting</h1>
<p class="text-lg md:text-xl max-w-2xl mx-auto">
  Get real-time alerts and lightning risk assessments powered by advanced storm prediction technology.
</p>
    <a href="#lightningPredictionForm" class="mt-6 inline-block bg-blue-600 dark:bg-blue-500 text-white px-6 py-3 rounded-full hover:bg-blue-700 dark:hover:bg-blue-600 transition">
      Explore Features
    </a>
  </div>

</section>

<section id="weatherSection" class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300">
        <!-- Weather Header with Toggle -->
        <div class="flex justify-between items-center bg-gradient-to-r from-blue-600 to-blue-500 dark:from-blue-800 dark:to-blue-700 p-4">
            <h2 class="text-2xl font-bold text-white flex items-center">
                <i class="fas fa-cloud-sun mr-3"></i> Real-time Weather Data
            </h2>
            <div class="flex space-x-2">
                <button id="useLiveLocation" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition flex items-center">
                    <i class="fas fa-location-arrow mr-2"></i> Use My Location
                </button>
                <button id="toggleWeatherInput" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition">
                    <i class="fas fa-search-location"></i>
                </button>
            </div>
        </div>

        <!-- Location Search Input (Hidden by default) -->
        <div id="locationSearchContainer" class="hidden p-4 border-b border-gray-200 dark:border-gray-700">
            <div class="flex">
                <input type="text" id="locationInput" placeholder="Enter city or zip code" 
                    class="flex-grow px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200">
                <button id="searchLocation" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-lg transition">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>

        <!-- Weather Display -->
        <div id="weatherDisplay" class="p-6">
            <div class="text-center py-8">
                <i class="fas fa-cloud-rain text-5xl text-gray-400 mb-4"></i>
                <p class="text-gray-600 dark:text-gray-400">Enter a location to view weather data</p>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div id="weatherLoading" class="hidden p-8 text-center">
            <div class="inline-block animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-600"></div>
            <p class="mt-4 text-gray-600 dark:text-gray-300">Fetching weather data...</p>
        </div>

        <!-- Error Message -->
        <div id="weatherError" class="hidden p-6 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg mx-4 mb-4">
            <i class="fas fa-exclamation-triangle mr-2"></i>
            <span id="errorMessage">Unable to fetch weather data</span>
        </div>
    </div>
</section>

    <main class="container mx-auto px-4 py-12">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-3xl md:text-4xl font-bold mb-6 text-blue-700 dark:text-blue-400">
                <i class="fas fa-bolt mr-3"></i>Thunderstorm Prediction
            </h1>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Prediction Form -->
                <div class="lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg transition">
                    <h2 class="text-2xl font-bold mb-6 text-blue-700 dark:text-blue-400">Thunderstorm Risk Classification</h2>
                    
                    
                    <form id="thunderstormPredictionForm" class="prediction-form" data-disaster-type="thunderstorm">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        
                        <!-- Temperature -->
                        <div>
                            <label for="temperature" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Temperature (°C)</label>
                            <input type="number" step="any" id="temperature" name="temperature" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Current temperature" required>
                        </div>
                        
                        <!-- Dew Point -->
                        <div>
                            <label for="dew_point" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Dew Point (°C)</label>
                            <input type="number" step="any" id="dew_point" name="dew_point" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Dew point temperature" required>
                        </div>
                        
                        <!-- Humidity -->
                        <div>
                            <label for="humidity" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Humidity (%)</label>
                            <input type="number" min="0" max="100" step="any" id="humidity" name="humidity" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Relative humidity" required>
                        </div>
                        
                        <!-- Pressure -->
                        <div>
                            <label for="pressure" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Pressure (hPa)</label>
                            <input type="number" step="any" id="pressure" name="pressure" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Atmospheric pressure" required>
                        </div>
                        
                        <!-- Wind Speed -->
                        <div>
                            <label for="wind_speed" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Wind Speed (km/h)</label>
                            <input type="number" step="any" id="wind_speed" name="wind_speed" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Wind speed" required>
                        </div>
                        
                        <!-- Wind Direction -->
                        <div>
                            <label for="wind_direction" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Wind Direction (°)</label>
                            <input type="number" min="0" max="360" step="any" id="wind_direction" name="wind_direction" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Wind direction" required>
                        </div>
                        
                        <!-- Cloud Cover -->
                        <div>
                            <label for="cloud_cover" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Cloud Cover (%)</label>
                            <input type="number" min="0" max="100" step="any" id="cloud_cover" name="cloud_cover" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Cloud coverage" required>
                        </div>
                        
                        <!-- Precipitation -->
                        <div>
                            <label for="precipitation" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Precipitation (mm)</label>
                            <input type="number" step="any" id="precipitation" name="precipitation" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Precipitation level" required>
                        </div>
                        
                        <!-- UV Index -->
                        <div>
                            <label for="uvi" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">UV Index</label>
                            <input type="number" step="any" id="uvi" name="uvi" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="UV index" required>
                        </div>
                        
                        <!-- Visibility -->
                        <div>
                            <label for="visibility" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Visibility (km)</label>
                            <input type="number" step="any" id="visibility" name="visibility" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Visibility range" required>
                        </div>
                        
                        <!-- Elevation -->
                        <div>
                            <label for="elevation" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Elevation (m)</label>
                            <input type="number" step="any" id="elevation" name="elevation" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Elevation above sea level" required>
                        </div>
                        <!-- Weather Code -->
                        <div>
                            <label for="weather_code" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Weather Code</label>
                            <input type="number" id="weather_code" name="weather_code" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200" placeholder="Enter weather code (e.g. 800 for clear sky)" required>
                        </div>

                    </div>

                    
                    <div class="mt-8">
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition flex items-center justify-center">
                            <i class="fas fa-cloud-bolt mr-2"></i> Predict Thunderstorm Risk
                        </button>
                    </div>
                </form>

                <!-- Loading Indicator -->
                <div id="loading-indicator" class="hidden mt-6 text-center">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"></div>
                    <p class="mt-2 text-gray-600 dark:text-gray-300">Analyzing atmospheric conditions...</p>
                </div>

                        <div id="loading-thunderstorm" class="hidden mt-6 text-center">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"></div>
                    <p class="mt-2 text-gray-600 dark:text-gray-300">Analyzing atmospheric conditions...</p>
                </div>

                <!-- Prediction Result -->
                <div id="prediction-result" class="mt-8"></div>
                {% if prediction %}
                <h2>Thunderstorm Prediction: {{ prediction }}</h2>
                <div id="thunderstormPredictionResult" class="mt-4 text-lg font-semibold text-indigo-600"></div>
                {% endif %}

                <div id="thunderstorm-result" class="mt-8 text-lg font-semibold text-indigo-700 dark:text-indigo-300"></div>

            



                    
                    <!-- Lightning Map -->
                    <div id="lightningMap" class="mt-8 hidden">
                        <h3 class="font-bold mb-4 text-gray-800 dark:text-white">Thunderstorm Strike Probability</h3>
                        <div class="h-64 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center">
                            <img src="https://via.placeholder.com/600x300/1e3a8a/ffffff?text=Lightning+Strike+Map" alt="Lightning strike probability map" class="w-full h-full object-cover rounded-lg">
                        </div>
                    </div>
                </div>
                
                <!-- Safety Information -->
                <div class="bg-beige-100 dark:bg-gray-800 p-6 rounded-xl shadow-lg transition">
                    <h2 class="text-2xl font-bold mb-6 text-blue-700 dark:text-blue-400">Thunderstorm Safety Tips</h2>
                    
                    <div class="space-y-6">
                        <div class="flex items-start">
                            <div class="flex-shrink-0 bg-blue-100 dark:bg-blue-900 p-2 rounded-full mr-4">
                                <i class="fas fa-home text-blue-600 dark:text-blue-300"></i>
                            </div>
                            <div>
                                <h3 class="font-bold mb-1 text-gray-800 dark:text-white">Before a Storm</h3>
                                <ul class="list-disc pl-5 text-sm space-y-1 text-gray-600 dark:text-gray-300">
                                    <li>Monitor weather forecasts</li>
                                    <li>Identify safe shelters</li>
                                    <li>Unplug electronic devices</li>
                                    <li>Prepare emergency supplies</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <div class="flex-shrink-0 bg-purple-100 dark:bg-purple-900 p-2 rounded-full mr-4">
                                <i class="fas fa-exclamation-triangle text-purple-600 dark:text-purple-300"></i>
                            </div>
                            <div>
                                <h3 class="font-bold mb-1 text-gray-800 dark:text-white">During a Storm</h3>
                                <ul class="list-disc pl-5 text-sm space-y-1 text-gray-600 dark:text-gray-300">
                                    <li>Seek shelter immediately</li>
                                    <li>Avoid open fields and high ground</li>
                                    <li>Stay away from tall objects</li>
                                    <li>Don't use corded phones</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <div class="flex-shrink-0 bg-indigo-100 dark:bg-indigo-900 p-2 rounded-full mr-4">
                                <i class="fas fa-clinic-medical text-indigo-600 dark:text-indigo-300"></i>
                            </div>
                            <div>
                                <h3 class="font-bold mb-1 text-gray-800 dark:text-white">If Someone Is Struck</h3>
                                <ul class="list-disc pl-5 text-sm space-y-1 text-gray-600 dark:text-gray-300">
                                    <li>Call for help immediately</li>
                                    <li>Victims don't carry electrical charge</li>
                                    <li>Check for breathing and pulse</li>
                                    <li>Begin CPR if necessary</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 bg-blue-50 dark:bg-blue-900 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-800 dark:text-blue-200 mb-2">Emergency Contacts</h3>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-center text-blue-700 dark:text-blue-200">
                                <i class="fas fa-phone-alt text-blue-500 dark:text-blue-300 mr-2"></i>
                                <span>Local Emergency: 911</span>
                            </li>
                            <li class="flex items-center text-blue-700 dark:text-blue-200">
                                <i class="fas fa-phone-alt text-blue-500 dark:text-blue-300 mr-2"></i>
                                <span>Storm Helpline: 1-800-STORM-99</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-globe text-blue-500 dark:text-blue-300 mr-2"></i>
                                <a href="#" class="text-blue-600 dark:text-blue-300 hover:underline">NOAA Lightning Safety</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Historical Data Section -->
            <div class="mt-16 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg transition">
                <h2 class="text-2xl font-bold mb-6 text-blue-700 dark:text-blue-400">Historical Lightning Data</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-bold mb-4 text-gray-800 dark:text-white">Monthly Strike Frequency</h3>
                        <div class="h-64">
                            <canvas id="strikeFrequencyChart"></canvas>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="font-bold mb-4 text-gray-800 dark:text-white">Strike Intensity</h3>
                        <div class="h-64">
                            <canvas id="strikeIntensityChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       <!-- Footer -->
            <footer class="bg-green-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <h3 class="text-xl font-bold mb-4 flex items-center">
                <i class="fas fa-shield-alt mr-2"></i> DisasterAlert
                </h3>
                <p class="mb-4">Providing AI-powered disaster predictions to keep communities safe worldwide.</p>
                <div class="flex space-x-4">
                <a href="#" class="text-white hover:text-beige-300"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" class="text-white hover:text-beige-300"><i class="fab fa-twitter"></i></a>
                <a href="#" class="text-white hover:text-beige-300"><i class="fab fa-github"></i></a>
                </div>
            </div>

            <div>
                <h4 class="font-bold mb-4">Quick Links</h4>
                <ul class="space-y-2">
                <li><a href="{{ url_for('index') }}" class="transition hover:text-green-300 hover:underline">Home</a></li>
                <li><a href="{{ url_for('alerts') }}" class="transition hover:text-green-300 hover:underline">Alerts</a></li>
                <li><a href="{{ url_for('updates') }}" class="transition hover:text-green-300 hover:underline">Recent Updates</a></li>
                <li><a href="{{ url_for('analysis') }}" class="transition hover:text-green-300 hover:underline">Analysis</a></li>
                </ul>
            </div>

            <div>
                <h4 class="font-bold mb-4">Predictions</h4>
                <ul class="space-y-2">
                <li><a href="{{ url_for('flood') }}" class="transition hover:text-green-300 hover:underline">Flood</a></li>
                <li><a href="{{ url_for('fire') }}" class="transition hover:text-green-300 hover:underline">Forest Fire</a></li>
                <li><a href="{{ url_for('earthquake') }}" class="transition hover:text-green-300 hover:underline">Earthquake</a></li>
                <li><a href="{{ url_for('cyclone') }}" class="transition hover:text-green-300 hover:underline">Cyclone</a></li>
                </ul>
            </div>

            <div>
                <h4 class="font-bold mb-4 text-white">Contact Us</h4>
                <ul class="contact-list space-y-2 text-white">
                <li class="contact-item flex items-start cursor-pointer">
                    <i class="fas fa-envelope mt-1 mr-2"></i>
                    <span>alerts@disasterpredict.org</span>
                </li>
                <li class="contact-item flex items-start cursor-pointer">
                    <i class="fas fa-phone-alt mt-1 mr-2"></i>
                    <span>+1 (555) 123-4567</span>
                </li>
                <li class="contact-item flex items-start cursor-pointer">
                    <i class="fas fa-map-marker-alt mt-1 mr-2"></i>
                    <span>123 Safety Ave, Resilience City</span>
                </li>
                </ul>
            </div>
            </div>

            <div class="border-t border-green-700 mt-8 pt-8 text-center">
            <p>&copy; 2023 Disaster Prediction & Alert System. All rights reserved.</p>
            <div class="mt-4 flex justify-center space-x-4 text-sm">
                <a href="#" class="hover:glow transition hover:text-green-300">Privacy Policy</a>
                <a href="#" class="hover:glow transition hover:text-green-300">Terms of Service</a>
                <a href="#" class="hover:glow transition hover:text-green-300">Disclaimer</a>
            </div>
            </div>
        </div>
        </footer>
    <!-- Floating Pagination -->
<div class="floating-pagination">
    <a href="{{ url_for('index') }}" data-title="Home" class="active">
        <i class="fas fa-home"></i>
    </a>
    <a href="{{ url_for('flood') }}" data-title="Flood Prediction">
        <i class="fas fa-water"></i>
    </a>
    <a href="{{ url_for('fire') }}" data-title="Forest Fire Prediction">
        <i class="fas fa-fire"></i>
    </a>
    <a href="{{ url_for('earthquake') }}" data-title="Earthquake Prediction">
        <i class="fas fa-mountain"></i>
    </a>
    <a href="{{ url_for('cyclone') }}" data-title="Cyclone Prediction">
        <i class="fas fa-wind"></i>
    </a>
    <a href="{{ url_for('thunderstorm') }}" data-title="Thunderstorm Prediction">
        <i class="fas fa-bolt"></i>
    </a>
    <a href="{{ url_for('heatwave') }}" data-title="Heatwave Prediction">
        <i class="fas fa-temperature-high"></i>
    </a>
    <a href="{{ url_for('updates') }}" data-title="Real-time Updates">
        <i class="fas fa-satellite-dish"></i>
    </a>
    <a href="{{ url_for('alerts') }}" data-title="Emergency Alerts">
        <i class="fas fa-bell"></i>
    </a>
    <a href="{{ url_for('analysis') }}" data-title="Disaster Analysis">
        <i class="fas fa-chart-bar"></i>
    </a>
</div>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/themeToggle.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts
            const freqCtx = document.getElementById('strikeFrequencyChart').getContext('2d');
            new Chart(freqCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Lightning Strikes',
                        data: [1200, 1500, 1800, 2500, 3200, 4000, 4500, 4200, 3500, 2800, 2000, 1500],
                        borderColor: '#2196F3',
                        backgroundColor: 'rgba(33, 150, 243, 0.1)',
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            const intensityCtx = document.getElementById('strikeIntensityChart').getContext('2d');
            new Chart(intensityCtx, {
                type: 'bar',
                data: {
                    labels: ['<10kA', '10-30kA', '30-50kA', '50-100kA', '100kA+'],
                    datasets: [{
                        label: 'Strikes by Intensity',
                        data: [12000, 8500, 4500, 1800, 500],
                        backgroundColor: '#3F51B5',
                        borderColor: '#303F9F',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>
<script>
document.getElementById('thunderstormPredictionForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const formData = {
    temperature: document.getElementById('temperature').value,
    dew_point: document.getElementById('dew_point').value,
    humidity: document.getElementById('humidity').value,
    pressure: document.getElementById('pressure').value,
    wind_speed: document.getElementById('wind_speed').value,
    wind_direction: document.getElementById('wind_direction').value,
    cloud_cover: document.getElementById('cloud_cover').value,
    precipitation: document.getElementById('precipitation').value,
    uvi: document.getElementById('uvi').value,
    visibility: document.getElementById('visibility').value,
    elevation: document.getElementById('elevation').value,
    weather_code: document.getElementById('weather_code').value
  };

  fetch('/predict-thunderstorm', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(formData)
  })
  .then(response => response.json())
  .then(result => {
    const resultDiv = document.getElementById('thunderstorm-result');
    if (result.error) {
      resultDiv.innerHTML = `<span class="text-red-600 font-bold">❌ Error: ${result.error}</span>`;
    } else {
      resultDiv.innerHTML = result.prediction === 1
        ? `<span class="text-red-600 font-bold text-xl">⛈️ Thunderstorm likely. Stay alert!</span>`
        : `<span class="text-green-600 font-bold text-xl">✅ No thunderstorm expected. You're safe!</span>`;
    }
  })
  .catch(error => {
    document.getElementById('thunderstorm-result').innerHTML =
      `<span class="text-red-600 font-bold">❌ Error: ${error.message}</span>`;
  });
});
</script>







<script>
document.addEventListener('DOMContentLoaded', function() {
    // Elements
    const weatherDisplay = document.getElementById('weatherDisplay');
    const weatherLoading = document.getElementById('weatherLoading');
    const weatherError = document.getElementById('weatherError');
    const locationInput = document.getElementById('locationInput');
    const searchLocationBtn = document.getElementById('searchLocation');
    const useLiveLocationBtn = document.getElementById('useLiveLocation');
    const toggleWeatherInputBtn = document.getElementById('toggleWeatherInput');
    const locationSearchContainer = document.getElementById('locationSearchContainer');
    
    // Toggle location search input
    toggleWeatherInputBtn.addEventListener('click', function() {
        locationSearchContainer.classList.toggle('hidden');
    });

    // Fetch weather by location
    async function fetchWeather(lat, lon, locationName = '') {
        weatherDisplay.classList.add('hidden');
        weatherLoading.classList.remove('hidden');
        weatherError.classList.add('hidden');

        try {
            const response = await fetch(`https://api.weatherapi.com/v1/forecast.json?key=196f36a5be2a4c1eaed174902252107&q=${lat},${lon}&days=1`);
            const data = await response.json();
            
            if (data.error) throw new Error(data.error.message);
            
            displayWeather(data, locationName || data.location.name);
            populatePredictionForm(data);
            
        } catch (error) {
            console.error('Weather fetch error:', error);
            document.getElementById('errorMessage').textContent = error.message || 'Failed to fetch weather data';
            weatherError.classList.remove('hidden');
        } finally {
            weatherLoading.classList.add('hidden');
            weatherDisplay.classList.remove('hidden');
        }
    }

    // Display weather data
    function displayWeather(data, locationName) {
        const current = data.current;
        const forecast = data.forecast.forecastday[0].day;
        
        // Determine weather icon
        const weatherIcon = getWeatherIcon(current.condition.code, current.is_day);
        
        // Calculate feels like difference
        const feelsLikeDiff = current.feelslike_c - current.temp_c;
        const feelsLikeText = feelsLikeDiff > 0 ? 
            `Feels ${Math.round(feelsLikeDiff)}° warmer` :
            `Feels ${Math.round(Math.abs(feelsLikeDiff))}° cooler`;
        
        // Thunderstorm prediction
        const isThunderstorm = current.condition.code === 1087 || current.condition.code === 1273 || current.condition.code === 1276;
        const thunderstormRisk = calculateThunderstormRisk(current, forecast);
        
        weatherDisplay.innerHTML = `
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Main Weather Card -->
                <div class="md:col-span-2 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/50 dark:to-blue-800/50 rounded-xl p-6 shadow">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-800 dark:text-white">${locationName}</h3>
                            <p class="text-gray-600 dark:text-gray-300">${new Date(current.last_updated).toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' })}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm text-gray-600 dark:text-gray-300">${current.condition.text}</p>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Humidity: ${current.humidity}%</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between mt-6">
                        <div class="flex items-center">
                            <i class="${weatherIcon} text-6xl text-blue-500 dark:text-blue-300 mr-4"></i>
                            <div>
                                <span class="text-5xl font-bold text-gray-800 dark:text-white">${Math.round(current.temp_c)}°</span>
                                <span class="text-gray-600 dark:text-gray-300 ml-1">C</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-gray-600 dark:text-gray-300">${feelsLikeText}</p>
                            <p class="text-gray-600 dark:text-gray-300">Wind: ${Math.round(current.wind_kph)} km/h ${current.wind_dir}</p>
                        </div>
                    </div>
                </div>
                
                <!-- Thunderstorm Risk Card -->
                <div class="bg-gradient-to-br ${isThunderstorm ? 'from-red-50 to-red-100 dark:from-red-900/50 dark:to-red-800/50' : 'from-green-50 to-green-100 dark:from-green-900/50 dark:to-green-800/50'} rounded-xl p-6 shadow flex flex-col justify-center">
                    <div class="text-center">
                        <i class="fas fa-bolt text-4xl ${isThunderstorm ? 'text-red-500 dark:text-red-400' : 'text-green-500 dark:text-green-400'} mb-3"></i>
                        <h3 class="text-xl font-bold ${isThunderstorm ? 'text-red-800 dark:text-red-200' : 'text-green-800 dark:text-green-200'} mb-1">
                            ${isThunderstorm ? 'Thunderstorm Detected' : 'No Thunderstorm'}
                        </h3>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-2">
                            <div class="bg-${isThunderstorm ? 'red' : 'green'}-500 h-2.5 rounded-full" style="width: ${thunderstormRisk}%"></div>
                        </div>
                        <p class="text-sm mt-2 ${isThunderstorm ? 'text-red-600 dark:text-red-300' : 'text-green-600 dark:text-green-300'}">
                            Risk Level: ${getRiskLevel(thunderstormRisk)}
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Additional Weather Details -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 shadow">
                    <div class="flex items-center">
                        <i class="fas fa-temperature-low text-blue-500 dark:text-blue-300 mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Low/High</p>
                            <p class="font-semibold">${Math.round(forecast.mintemp_c)}° / ${Math.round(forecast.maxtemp_c)}°</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 shadow">
                    <div class="flex items-center">
                        <i class="fas fa-tint text-blue-500 dark:text-blue-300 mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Precipitation</p>
                            <p class="font-semibold">${forecast.daily_chance_of_rain}% (${forecast.totalprecip_mm}mm)</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 shadow">
                    <div class="flex items-center">
                        <i class="fas fa-wind text-blue-500 dark:text-blue-300 mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Wind Gusts</p>
                            <p class="font-semibold">${Math.round(current.gust_kph)} km/h</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 shadow">
                    <div class="flex items-center">
                        <i class="fas fa-eye text-blue-500 dark:text-blue-300 mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Visibility</p>
                            <p class="font-semibold">${current.vis_km} km</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Button to auto-fill prediction form -->
            <div class="mt-6 text-center">
                <button id="useWeatherForPrediction" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition">
                    <i class="fas fa-cloud-bolt mr-2"></i> Use This Data for Thunderstorm Prediction
                </button>
            </div>
        `;
    }

    // Helper function to get weather icon
    function getWeatherIcon(weatherCode, isDay) {
        // Thunderstorm
        if ([1087, 1273, 1276].includes(weatherCode)) return 'fas fa-bolt text-yellow-500';
        // Rain
        if ([1063, 1066, 1069, 1072, 1150, 1153, 1168, 1171, 1180, 1183, 1186, 1189, 1192, 1195, 1198, 1201, 1240, 1243, 1246].includes(weatherCode)) {
            return isDay ? 'fas fa-cloud-sun-rain text-blue-400' : 'fas fa-cloud-moon-rain text-blue-400';
        }
        // Snow
        if ([1114, 1117, 1204, 1207, 1210, 1213, 1216, 1219, 1222, 1225, 1237, 1249, 1252, 1255, 1258, 1261, 1264].includes(weatherCode)) {
            return 'fas fa-snowflake text-blue-200';
        }
        // Fog/Mist
        if ([1030, 1135, 1147].includes(weatherCode)) return 'fas fa-smog text-gray-400';
        // Clear
        if (weatherCode === 1000) return isDay ? 'fas fa-sun text-yellow-400' : 'fas fa-moon text-gray-300';
        // Cloudy
        return isDay ? 'fas fa-cloud-sun text-blue-300' : 'fas fa-cloud-moon text-blue-300';
    }

function calculateThunderstormRisk(current, forecast) {
    let risk = 0;

    // Check thunderstorm-prone weather codes
    const thunderstormCodes = [1087, 1273, 1276, 1279, 1282];
    if (thunderstormCodes.includes(current.condition.code)) {
        risk += 50;  // Moderate base risk
    }

    // Humidity: Increase risk only if > 65%
    if (current.humidity > 65) {
        risk += (current.humidity - 65) * 0.4;
    }

    // Pressure: Risk if below normal atmospheric pressure
    if (current.pressure_mb < 1010) {
        risk += (1010 - current.pressure_mb) * 0.3;
    }

    // Wind: Add risk only if > 20 kph
    if (current.wind_kph > 20) {
        risk += (current.wind_kph - 20) * 0.2;
    }

    // Rain chance: Add if rain chance > 30%
    if (forecast.daily_chance_of_rain > 30) {
        risk += (forecast.daily_chance_of_rain - 30) * 0.3;
    }

    // Final clamp
    return Math.min(100, Math.max(0, Math.round(risk)));
}


    function getRiskLevel(riskPercentage) {
        if (riskPercentage < 30) return 'Low';
        if (riskPercentage < 60) return 'Moderate';
        if (riskPercentage < 80) return 'High';
        return 'Extreme';
    }

    // Populate the prediction form with weather data
    function populatePredictionForm(weatherData) {
        const current = weatherData.current;
        const forecast = weatherData.forecast.forecastday[0].day;
        
        document.getElementById('temperature').value = Math.round(current.temp_c);
        document.getElementById('dew_point').value = Math.round(current.feelslike_c); // Approximate since WeatherAPI doesn't provide dew point
        document.getElementById('humidity').value = current.humidity;
        document.getElementById('pressure').value = current.pressure_mb;
        document.getElementById('wind_speed').value = Math.round(current.wind_kph);
        document.getElementById('wind_direction').value = current.wind_degree;
        document.getElementById('cloud_cover').value = current.cloud;
        document.getElementById('precipitation').value = forecast.totalprecip_mm;
        document.getElementById('uvi').value = current.uv;
        document.getElementById('visibility').value = current.vis_km;
        document.getElementById('weather_code').value = current.condition.code;
    }

    // Use live location
    useLiveLocationBtn.addEventListener('click', function() {
        if (!navigator.geolocation) {
            document.getElementById('errorMessage').textContent = 'Geolocation is not supported by your browser';
            weatherError.classList.remove('hidden');
            return;
        }

        weatherLoading.classList.remove('hidden');
        weatherDisplay.classList.add('hidden');
        weatherError.classList.add('hidden');
        
        navigator.geolocation.getCurrentPosition(
            async (position) => {
                try {
                    await fetchWeather(position.coords.latitude, position.coords.longitude);
                } catch (error) {
                    console.error('Geolocation error:', error);
                    document.getElementById('errorMessage').textContent = error.message || 'Failed to fetch weather for your location';
                    weatherError.classList.remove('hidden');
                } finally {
                    weatherLoading.classList.add('hidden');
                }
            },
            (error) => {
                console.error('Geolocation error:', error);
                document.getElementById('errorMessage').textContent = 'Unable to access your location. Please ensure location services are enabled.';
                weatherError.classList.remove('hidden');
                weatherLoading.classList.add('hidden');
            }
        );
    });

    // Search by location name
    searchLocationBtn.addEventListener('click', async function() {
        const location = locationInput.value.trim();
        if (!location) return;
        
        try {
            weatherLoading.classList.remove('hidden');
            weatherDisplay.classList.add('hidden');
            weatherError.classList.add('hidden');
            
            await fetchWeather(location);
        } catch (error) {
            console.error('Location search error:', error);
            document.getElementById('errorMessage').textContent = error.message || 'Failed to find location';
            weatherError.classList.remove('hidden');
            weatherLoading.classList.add('hidden');
        }
    });

    // Auto-fill prediction form button
    document.addEventListener('click', function(e) {
        if (e.target && e.target.id === 'useWeatherForPrediction') {
            document.getElementById('thunderstormPredictionForm').scrollIntoView({ behavior: 'smooth' });
        }
    });
});
</script>




</body>
</html>